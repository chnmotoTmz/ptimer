# 【連載第6回】思いついたタスクをストック！計画的vs無計画の可視化も～モード切替編～

## 前回のおさらい

アナログ時計風の円グラフで一日の可視化が完成！
今回は、**仕掛けタスクのストック機能**と**計画的vs無計画モード**を実装します。

## 仕掛けタスクストック機能

### なぜストック機能が必要？
作業中に突然思いつくタスクってありますよね...
- 「あ、これもやらなきゃ」
- 「明日の準備も必要だった」
- 「週末にやりたいことが...」

**今すぐやるわけじゃないけど、忘れたくない**
そんなタスクのための機能です！

### タブ切り替えで整理

```html
<div class="task-tabs">
    <button class="task-tab-btn active" data-tab="today">今日のタスク</button>
    <button class="task-tab-btn" data-tab="stock">仕掛けストック</button>
</div>
```

### ストックから今日への移動

```javascript
moveSelectedToToday() {
    const selectedTasks = this.stockTasks.filter(t => t.selected);
    
    selectedTasks.forEach(stockTask => {
        const newTask = {
            id: Date.now() + Math.random(),
            text: stockTask.text,
            completed: false,
            createdAt: new Date().toISOString()
        };
        this.tasks.push(newTask);
    });
    
    // 選択されたタスクをストックから削除
    this.stockTasks = this.stockTasks.filter(t => !t.selected);
}
```

## 計画的 vs 無計画モード

### モード選択UI

```html
<div class="mode-selection">
    <h3>作業モード</h3>
    <div class="mode-buttons">
        <button class="mode-btn active" data-mode="planned">
            <i class="fas fa-calendar-check"></i> 計画的遂行
        </button>
        <button class="mode-btn" data-mode="unplanned">
            <i class="fas fa-clock"></i> 無計画遂行（だらだら）
        </button>
    </div>
</div>
```

### 統計の分離記録

```javascript
// データ構造
this.dailyStats = {
    completedPomodoros: 0,
    totalFocusTime: 0,
    plannedPomodoros: 0,      // 新規追加
    unplannedPomodoros: 0,    // 新規追加
    plannedTime: 0,           // 新規追加
    unplannedTime: 0          // 新規追加
};
```

### モード別の進捗可視化

```javascript
// 効率性の計算
const totalPomodoros = plannedPomodoros + unplannedPomodoros;
const efficiency = totalPomodoros > 0 ? 
    (plannedPomodoros / totalPomodoros) * 100 : 0;

// プログレスバーで表示
document.getElementById('efficiency-fill').style.width = `${efficiency}%`;
```

## CSS で差別化

### 計画的モード（青系）
```css
.mode-btn[data-mode="planned"].active {
    background: #667eea;
    border-color: #667eea;
}

.comparison-card.planned {
    border-color: #667eea;
}
```

### 無計画モード（赤系）
```css
.mode-btn[data-mode="unplanned"].active {
    background: #ff6b6b;
    border-color: #ff6b6b;
}

.comparison-card.unplanned {
    border-color: #ff6b6b;
}
```

## ストック機能のUX工夫

### チェックボックス風の選択UI
```css
.stock-item::before {
    content: '';
    width: 16px;
    height: 16px;
    border: 2px solid #ccc;
    border-radius: 3px;
    background: white;
}

.stock-item.selected::after {
    content: '✓';
    color: white;
    font-size: 12px;
}
```

## 今日のポイント

✅ **仕掛けストック**で思いついたタスクを即座に保存
✅ **計画性の可視化**で作業の質を意識
✅ **タブ切り替え**で用途別に整理

## 次回予告

次回は「AI連携編」！
Gemini APIで継続タスクの予想や優先順位付けを実装します。

**読了時間: 約4分**

---

**#TaskManagement #UX #生産性 #モード切替 #ストック機能**

> 仕掛けタスクがどんどん溜まる！
> でも整理されてるから安心 📝💡